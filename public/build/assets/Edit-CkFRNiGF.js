import{r as o,u as A,j as e,H as $,a as f}from"./app-DyCjsNn8.js";import{T as M}from"./TextInput-CprjMwil.js";import{A as D}from"./AuthenticatedLayout-De5DrKMk.js";import{D as w,f as k,i as T,j as q,E as H,v as K,n as O}from"./index-CU3nk_ze.js";import{a as _}from"./index-DfFsnYzX.js";import"./transition-CzLH_g9G.js";function V({wordBank:i}){const[l,x]=o.useState([]),[b,c]=o.useState(!1),[d,p]=o.useState(null),{data:g,setData:j,put:P,processing:v,errors:m,reset:R}=A({name:i.name||"",description:i.description||"",is_active:i.is_active??!0}),[r,u]=o.useState({word:"",meaning:"",is_active:!0}),[n,h]=o.useState({});o.useEffect(()=>{if(i.words){const s=i.words.map(t=>({id:t.id,word:t.word,meaning:t.meaning,is_active:t.is_active,isExisting:!0}));x(s)}},[i.words]);const y=(s,t)=>{u(a=>({...a,[s]:t})),n[s]&&h(a=>({...a,[s]:""}))},W=()=>{const s={};return r.word.trim()?l.some(a=>a.word.toLowerCase()===r.word.toLowerCase()&&(!d||a.id!==d.id))&&(s.word="This word already exists in the list"):s.word="Word is required",r.meaning.trim()||(s.meaning="Meaning is required"),s},C=()=>{const s=W();if(Object.keys(s).length>0){h(s);return}if(d)x(t=>t.map(a=>a.id===d.id?{...a,word:r.word.trim(),meaning:r.meaning.trim(),is_active:r.is_active}:a)),p(null);else{const t={id:`new_${Date.now()}`,word:r.word.trim(),meaning:r.meaning.trim(),is_active:r.is_active,isExisting:!1};x(a=>[...a,t])}u({word:"",meaning:"",is_active:!0}),h({}),c(!1)},F=s=>{x(t=>t.filter(a=>a.id!==s))},S=s=>{const t=l.find(a=>a.id===s);t&&(u({word:t.word,meaning:t.meaning,is_active:t.is_active}),p(t),c(!0))},E=s=>{s.preventDefault();const t=l.map(({id:a,isExisting:I,...L})=>({...L,...I&&{id:a}}));f.put(route("word-banks.update",i.id),{...g,words:t},{preserveState:!0,preserveScroll:!0})},N=()=>{c(!1),p(null),u({word:"",meaning:"",is_active:!0}),h({})};return e.jsxs(D,{header:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>f.visit(route("word-banks.show",i.id)),className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(O,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(_,{className:"w-8 h-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"I-edit ang Word Bank"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Baguhin ang iyong koleksyon ng salita"})]})]})]}),children:[e.jsx($,{title:`I-edit ang ${i.name}`}),e.jsx("div",{className:"py-6 sm:py-8",children:e.jsx("div",{className:"mx-auto max-w-4xl px-4 sm:px-6 lg:px-8",children:e.jsxs("form",{onSubmit:E,className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Impormasyon ng Word Bank"}),e.jsx("p",{className:"text-sm text-gray-600",children:"I-update ang pangunahing detalye ng iyong word bank"})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Pangalan *"}),e.jsx(M,{id:"name",className:"mt-1 block w-full",value:g.name,onChange:s=>j("name",s.target.value),required:!0,isFocused:!0}),m.name&&e.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[e.jsx(w,{className:"w-4 h-4"}),m.name]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Paglalarawan"}),e.jsx("textarea",{id:"description",rows:3,value:g.description,onChange:s=>j("description",s.target.value),className:`block w-full px-3 py-2 border rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${m.description?"border-red-300":"border-gray-300"}`,placeholder:"Opsyonal na paglalarawan ng word bank"}),m.description&&e.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[e.jsx(w,{className:"w-4 h-4"}),m.description]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:g.is_active,onChange:s=>j("is_active",s.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"is_active",className:"ml-2 block text-sm text-gray-700",children:"Aktibo (makikita ng iba)"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Words"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Manage words in your word bank (",l.length," words)"]})]}),!b&&e.jsxs("button",{type:"button",onClick:()=>c(!0),className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 transition-colors",children:[e.jsx(k,{className:"w-4 h-4 mr-2"}),"Add Word"]})]})}),e.jsxs("div",{className:"p-6",children:[b&&e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"text-md font-medium text-gray-900",children:d?"I-edit ang Salita":"Magdagdag ng Bagong Salita"}),e.jsx("button",{type:"button",onClick:N,className:"text-gray-400 hover:text-gray-600",children:e.jsx(T,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Salita *"}),e.jsx("input",{type:"text",value:r.word,onChange:s=>y("word",s.target.value),className:`block w-full px-3 py-2 border rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${n.word?"border-red-300":"border-gray-300"}`,placeholder:"Ilagay ang salita"}),n.word&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.word})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kahulugan *"}),e.jsx("input",{type:"text",value:r.meaning,onChange:s=>y("meaning",s.target.value),className:`block w-full px-3 py-2 border rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${n.meaning?"border-red-300":"border-gray-300"}`,placeholder:"Ilagay ang kahulugan"}),n.meaning&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.meaning})]})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"word_is_active",checked:r.is_active,onChange:s=>y("is_active",s.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"word_is_active",className:"ml-2 block text-sm text-gray-700",children:"Aktibo"})]})}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-4",children:[e.jsx("button",{type:"button",onClick:N,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Kanselahin"}),e.jsx("button",{type:"button",onClick:C,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-lg hover:bg-blue-700 transition-colors",children:d?"I-update ang Salita":"Magdagdag ng Salita"})]})]}),l.length>0?e.jsx("div",{className:"space-y-3",children:l.map(s=>e.jsx("div",{className:`border rounded-lg p-4 hover:shadow-sm transition-shadow ${s.isExisting===!1?"border-green-200 bg-green-50":"border-gray-200"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:s.word}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${s.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:s.is_active?"Aktibo":"Hindi Aktibo"}),s.isExisting===!1&&e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Bago"})]})]}),e.jsx("p",{className:"text-gray-700 mb-2",children:s.meaning})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>S(s.id),className:"text-blue-600 hover:text-blue-900 p-1 rounded-lg hover:bg-blue-50 transition-colors",title:"Edit word",children:e.jsx(_,{className:"w-4 h-4"})}),e.jsx("button",{type:"button",onClick:()=>F(s.id),className:"text-red-600 hover:text-red-900 p-1 rounded-lg hover:bg-red-50 transition-colors",title:"Remove word",children:e.jsx(q,{className:"w-4 h-4"})})]})]})},s.id))}):b?null:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(H,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Walang salita sa word bank na ito"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Idagdag ang unang salita para makapagsimula."}),e.jsx("div",{className:"mt-6",children:e.jsxs("button",{type:"button",onClick:()=>c(!0),className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700",children:[e.jsx(k,{className:"w-5 h-5 mr-2"}),"Magdagdag ng Unang Salita"]})})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-6",children:[e.jsx("button",{type:"button",onClick:()=>f.visit(route("word-banks.show",i.id)),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Kanselahin"}),e.jsx("button",{type:"submit",disabled:v,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:v?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Ina-update..."]}):e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"w-4 h-4 mr-2"}),"I-update ang Word Bank"]})})]})]})})})]})}export{V as default};
